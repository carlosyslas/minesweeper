(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,n,t){e.exports=t(49)},38:function(e,n,t){},49:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(11),l=t.n(o),c=(t(38),t(12)),u=t(13),i=t(19),f=t(14),p=t(20),d=t(10),s=t(15),m=t(52),v=t(53),g=t(55),h=t(54),w=t(5),x=t(6),b=t(7),E=Object(b.Record)({value:0,covered:!0,flagged:!1}),C=new b.List,O=-1,y=function(e,n){var t=n.row,r=n.col;return t>=0&&r>=0&&t<e.size&&r<e.get(0).size},N=function(e,n,t){if(n<0||t<0)return 0;var r=e.getIn([n,t]);return r&&r.value===O?1:0},S=function(e,n){var t=n.row,r=n.col;return e.getIn([t,r,"covered"])},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.type,r=n.payload;switch(t){case"UNCOVER_CELL":return function e(n,t){var r=t.row,a=t.col;if(!y(n,{row:r,col:a}))return n;var o=n.getIn([r,a,"value"]),l=n.getIn([r,a,"covered"]);return l?(o===O&&(n=n.map(function(e){return e.map(function(e){return e.get("value")===O?e.set("covered",!1):e})})),n=n.setIn([r,a,"covered"],!1).setIn([r,a,"flagged"],!1),0===o&&l&&(n=e(n,{row:r-1,col:a-1}),n=e(n,{row:r-1,col:a}),n=e(n,{row:r-1,col:a+1}),n=e(n,{row:r,col:a-1}),n=e(n,{row:r,col:a+1}),n=e(n,{row:r+1,col:a-1}),n=e(n,{row:r+1,col:a}),n=e(n,{row:r+1,col:a+1})),n):n}(e,r);case"CREATE_NEW_BOARD":return function(e){for(var n=e.width,t=e.height,r=e.mines,a=[],o=0;o<t;o++){for(var l=[],c=0;c<n;c++)l.push(new E({}));a.push(new b.List(l))}for(var u=new b.List(a),i=0;i<r;i++){for(var f=Math.floor(Math.random()*t),p=Math.floor(Math.random()*n);u.getIn([f,p,"value"])===O;)f=Math.floor(Math.random()*t),p=Math.floor(Math.random()*n);u=u.setIn([f,p,"value"],O)}for(var d=0;d<t;d++)for(var s=0;s<n;s++){var m=u.getIn([d,s,"value"]);m!==O&&(m+=N(u,d-1,s-1),m+=N(u,d-1,s),m+=N(u,d-1,s+1),m+=N(u,d,s-1),m+=N(u,d,s+1),m+=N(u,d+1,s-1),m+=N(u,d+1,s),m+=N(u,d+1,s+1),u=u.setIn([d,s,"value"],m))}return u}(r);case"FLAG_CELL":return function(e,n){var t=n.row,r=n.col;return y(e,{row:t,col:r})&&S(e,{row:t,col:r})?e.setIn([t,r,"flagged"],!0):e}(e,r);case"UNFLAG_CELL":return function(e,n){var t=n.row,r=n.col;return y(e,{row:t,col:r})&&S(e,{row:t,col:r})?e.setIn([t,r,"flagged"],!1):e}(e,r);default:return e}},I=function(e){return e.getIn(["game","board"])},L=function(e){return I(e).flatten().count(function(e){return e.get("covered")&&e.get("value")!==O})},k=function(e){return e.getIn(["game","status"])},G={MENU:Symbol("menu"),RUNNING:Symbol("running"),LOST:Symbol("lost"),WON:Symbol("won")},A={bodyBackground:"#333",whiteColor:"#fff",primaryColor:"#6cb7ff",cellSize:30,minesCountColors:["#00C9A7","#008F7A","#0089BA","#2C73D2","#845EC2","#D65DB1","#FF6F91","#FF9671"]};function R(){var e=Object(w.a)(["\n  color: ",";\n"]);return R=function(){return e},e}function U(){var e=Object(w.a)(["\n  font-size: 12px;\n  color: red;\n"]);return U=function(){return e},e}function M(){var e=Object(w.a)(["\n  width: ","px;\n  height: ","px;\n  border-radius: 50%;\n  background: #ff7500;\n  margin: 0 auto;\n  display: inline-block;\n  vertical-align: middle;\n  box-shadow: 0px 0px 5px 1px #ff3f00, 0px 0px 3px 0px #fffc00 inset;\n"]);return M=function(){return e},e}function _(){var e=Object(w.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n"]);return _=function(){return e},e}function z(){var e=Object(w.a)(["\n  width: ","px;\n  height: ","px;\n  background: ",";\n  border: 2px solid ",";\n  border-radius: 4px;\n  text-align: center;\n  font-size: ","px;\n  line-height: ","px;\n  transition: 0.3s;\n  box-shadow: 0px 0px 5px 3px rgba(0, 0, 0, 0.15) inset;\n  cursor: pointer;\n  :hover {\n    filter: brightness(1.2);\n  }\n"]);return z=function(){return e},e}var T=x.a.div(z(),A.cellSize,A.cellSize,function(e){return e.covered?A.primaryColor:A.whiteColor},A.bodyBackground,.6*A.cellSize,A.cellSize),B=x.a.div(_()),F=x.a.div(M(),A.cellSize/2,A.cellSize/2),D=x.a.div(U()),W=function(){return a.a.createElement(D,null,a.a.createElement("i",{className:"fas fa-flag"}))},J=x.a.span(R(),function(e){return A.minesCountColors[e.value-1]}),V=function(e){var n=e.value,t=e.covered;return e.flagged?a.a.createElement(W,null):0===n?null:t?null:n<0?a.a.createElement(F,null):a.a.createElement(J,{value:n},n)},H=function(e){function n(){var e,t;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(i.a)(this,(e=Object(f.a)(n)).call.apply(e,[this].concat(a)))).handleCellClick=function(e){var n=e.row,r=e.col,a=t.props,o=a.board,l=a.gameStatus,c=a.setGameStatus,u=a.uncoverCell;l===G.RUNNING&&(u({row:n,col:r}),o.getIn([n,r,"value"])===O&&c(G.LOST))},t.handleCellRightClick=function(e,n){var r=n.row,a=n.col,o=t.props,l=o.board,c=o.gameStatus,u=o.unflagCell,i=o.flagCell;e.preventDefault(),c===G.RUNNING&&(l.getIn([r,a,"flagged"])?u({row:r,col:a}):i({row:r,col:a}))},t}return Object(p.a)(n,e),Object(u.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.props,n=e.setGameStatus;0===e.coveredCellsCount&&n(G.WON)}},{key:"render",value:function(){var e=this,n=this.props,t=n.board,r=n.createNewBoard,o=n.setGameStatus,l=n.coveredCellsCount;return a.a.createElement("div",null,"COUNT:",l,a.a.createElement("button",{onClick:function(){o(G.RUNNING),r({width:9,height:9,mines:1})}},"New"),t.map(function(n,t){return a.a.createElement(B,null,n.map(function(n,r){return a.a.createElement(T,{covered:n.covered,onClick:function(){return e.handleCellClick({row:t,col:r})},onContextMenu:function(n){return e.handleCellRightClick(n,{row:t,col:r})}},a.a.createElement(V,{value:n.value,covered:n.covered,flagged:n.flagged}))}))}))}}]),n}(r.Component),$={createNewBoard:function(e){return{type:"CREATE_NEW_BOARD",payload:{width:e.width,height:e.height,mines:e.mines}}},uncoverCell:function(e){return{type:"UNCOVER_CELL",payload:{row:e.row,col:e.col}}},flagCell:function(e){return{type:"FLAG_CELL",payload:{row:e.row,col:e.col}}},unflagCell:function(e){return{type:"UNFLAG_CELL",payload:{row:e.row,col:e.col}}},setGameStatus:function(e){return{type:"SET_GAME_STATUS",payload:e}}},q=Object(d.b)(function(e){return{board:I(e),gameStatus:k(e),coveredCellsCount:L(e)}},$)(H);function K(){var e=Object(w.a)(["\n  position: fixed;\n  top: 150px;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  padding: 50px 150px;\n  font-size: 30px;\n  color: ","\n  text-shadow: -2px -2px 0 #fff, 0px -2px 0 #fff, 2px -2px 0 #fff,\n    -2px 2px 0 #fff, 0px 2px #fff, 2px 2px 0 #fff, 0px 0px 60px #fff,\n    0px 0px 40px #fff, 0px 0px 20px #fff;\n"]);return K=function(){return e},e}var P=x.a.div(K(),A.bodyBackground),Q=function(e){var n=e.gameStatus;return n!==G.RUNNING&&n!==G.MENU&&a.a.createElement(P,null,n===G.LOST&&a.a.createElement("h2",null,"Game Over"),n===G.WON&&a.a.createElement("h2",null,"Congratulations!"))};function X(){var e=Object(w.a)(["\n  max-width: 960px;\n  margin: 30px auto;\n  text-align: center;\n"]);return X=function(){return e},e}var Y=x.a.div(X()),Z=Object(d.b)(function(e){return{gameStatus:k(e)}})(function(e){var n=e.gameStatus;return a.a.createElement(Y,null,a.a.createElement(q,null),a.a.createElement(Q,{gameStatus:n}))}),ee=t(51);function ne(){var e=Object(w.a)(["\n  margin: 30px;\n"]);return ne=function(){return e},e}function te(){var e=Object(w.a)(["\n  color: #fff;\n  max-width: 960px;\n  margin: 0 auto;\n"]);return te=function(){return e},e}var re=x.a.div(te()),ae=x.a.div(ne()),oe=function(){return a.a.createElement(re,null,a.a.createElement(ae,null,a.a.createElement("h1",null,"Start new game"),"Home ",a.a.createElement(ee.a,{to:"/minesweeper/game"},"Game")))},le=t(16),ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G.MENU,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.type,r=n.payload;return"SET_GAME_STATUS"===t?r:e},ue=Object(le.combineReducers)({board:j,status:ce}),ie=Object(le.combineReducers)({game:ue}),fe=Object(s.b)(ie),pe=function(e){var n=e.match;return a.a.createElement(m.a,null,a.a.createElement(v.a,{path:"".concat(n.path,"/game"),component:Z}),a.a.createElement(v.a,{path:"".concat(n.path,"/menu"),component:oe}))},de=function(e){function n(){return Object(c.a)(this,n),Object(i.a)(this,Object(f.a)(n).apply(this,arguments))}return Object(p.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){return a.a.createElement(d.a,{store:fe},a.a.createElement(h.a,null,a.a.createElement(m.a,null,a.a.createElement(v.a,{path:"/minesweeper",component:pe}),a.a.createElement(g.a,{to:"/minesweeper/menu"}))))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(de,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.509df684.chunk.js.map