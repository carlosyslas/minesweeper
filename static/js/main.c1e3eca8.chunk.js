(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,n,t){e.exports=t(49)},38:function(e,n,t){},49:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(10),l=t.n(o),c=(t(38),t(11)),u=t(12),i=t(18),f=t(13),p=t(19),d=t(9),s=t(14),v=t(52),m=t(53),g=t(54),h=t(4),w=t(5),x=t(7),b=Object(x.Record)({value:0,covered:!0,flagged:!1}),E=new x.List,C=-1,O=function(e,n){var t=n.row,r=n.col;return t>=0&&r>=0&&t<e.size&&r<e.get(0).size},y=function(e,n,t){if(n<0||t<0)return 0;var r=e.getIn([n,t]);return r&&r.value===C?1:0},N=function(e,n){var t=n.row,r=n.col;return e.getIn([t,r,"covered"])},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.type,r=n.payload;switch(t){case"UNCOVER_CELL":return function e(n,t){var r=t.row,a=t.col;if(!O(n,{row:r,col:a}))return n;var o=n.getIn([r,a,"value"]),l=n.getIn([r,a,"covered"]);return l?(o===C&&(n=n.map(function(e){return e.map(function(e){return e.get("value")===C?e.set("covered",!1):e})})),n=n.setIn([r,a,"covered"],!1).setIn([r,a,"flagged"],!1),0===o&&l&&(n=e(n,{row:r-1,col:a-1}),n=e(n,{row:r-1,col:a}),n=e(n,{row:r-1,col:a+1}),n=e(n,{row:r,col:a-1}),n=e(n,{row:r,col:a+1}),n=e(n,{row:r+1,col:a-1}),n=e(n,{row:r+1,col:a}),n=e(n,{row:r+1,col:a+1})),n):n}(e,r);case"CREATE_NEW_BOARD":return function(e){for(var n=e.width,t=e.height,r=e.mines,a=[],o=0;o<t;o++){for(var l=[],c=0;c<n;c++)l.push(new b({}));a.push(new x.List(l))}for(var u=new x.List(a),i=0;i<r;i++){for(var f=Math.floor(Math.random()*t),p=Math.floor(Math.random()*n);u.getIn([f,p,"value"])===C;)f=Math.floor(Math.random()*t),p=Math.floor(Math.random()*n);u=u.setIn([f,p,"value"],C)}for(var d=0;d<t;d++)for(var s=0;s<n;s++){var v=u.getIn([d,s,"value"]);v!==C&&(v+=y(u,d-1,s-1),v+=y(u,d-1,s),v+=y(u,d-1,s+1),v+=y(u,d,s-1),v+=y(u,d,s+1),v+=y(u,d+1,s-1),v+=y(u,d+1,s),v+=y(u,d+1,s+1),u=u.setIn([d,s,"value"],v))}return u}(r);case"FLAG_CELL":return function(e,n){var t=n.row,r=n.col;return O(e,{row:t,col:r})&&N(e,{row:t,col:r})?e.setIn([t,r,"flagged"],!0):e}(e,r);case"UNFLAG_CELL":return function(e,n){var t=n.row,r=n.col;return O(e,{row:t,col:r})&&N(e,{row:t,col:r})?e.setIn([t,r,"flagged"],!1):e}(e,r);default:return e}},j=function(e){return e.getIn(["game","board"])},I=function(e){return j(e).flatten().count(function(e){return e.get("covered")&&e.get("value")!==C})},L=function(e){return e.getIn(["game","status"])},k={MENU:Symbol("menu"),RUNNING:Symbol("running"),LOST:Symbol("lost"),WON:Symbol("won")},G={bodyBackground:"#333",whiteColor:"#fff",primaryColor:"#6cb7ff",cellSize:30,minesCountColors:["#00C9A7","#008F7A","#0089BA","#2C73D2","#845EC2","#D65DB1","#FF6F91","#FF9671"]};function A(){var e=Object(h.a)(["\n  color: ",";\n"]);return A=function(){return e},e}function R(){var e=Object(h.a)(["\n  font-size: 12px;\n  color: red;\n"]);return R=function(){return e},e}function U(){var e=Object(h.a)(["\n  width: ","px;\n  height: ","px;\n  border-radius: 50%;\n  background: #ff7500;\n  margin: 0 auto;\n  display: inline-block;\n  vertical-align: middle;\n  box-shadow: 0px 0px 5px 1px #ff3f00, 0px 0px 3px 0px #fffc00 inset;\n"]);return U=function(){return e},e}function M(){var e=Object(h.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n"]);return M=function(){return e},e}function _(){var e=Object(h.a)(["\n  width: ","px;\n  height: ","px;\n  background: ",";\n  border: 2px solid ",";\n  border-radius: 4px;\n  text-align: center;\n  font-size: ","px;\n  line-height: ","px;\n  transition: 0.3s;\n  box-shadow: 0px 0px 5px 3px rgba(0, 0, 0, 0.15) inset;\n  cursor: pointer;\n  :hover {\n    filter: brightness(1.2);\n  }\n"]);return _=function(){return e},e}var z=w.a.div(_(),G.cellSize,G.cellSize,function(e){return e.covered?G.primaryColor:G.whiteColor},G.bodyBackground,.6*G.cellSize,G.cellSize),T=w.a.div(M()),B=w.a.div(U(),G.cellSize/2,G.cellSize/2),F=w.a.div(R()),D=function(){return a.a.createElement(F,null,a.a.createElement("i",{className:"fas fa-flag"}))},W=w.a.span(A(),function(e){return G.minesCountColors[e.value-1]}),J=function(e){var n=e.value,t=e.covered;return e.flagged?a.a.createElement(D,null):0===n?null:t?null:n<0?a.a.createElement(B,null):a.a.createElement(W,{value:n},n)},V=function(e){function n(){var e,t;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(i.a)(this,(e=Object(f.a)(n)).call.apply(e,[this].concat(a)))).handleCellClick=function(e){var n=e.row,r=e.col,a=t.props,o=a.board,l=a.gameStatus,c=a.setGameStatus,u=a.uncoverCell;l===k.RUNNING&&(u({row:n,col:r}),o.getIn([n,r,"value"])===C&&c(k.LOST))},t.handleCellRightClick=function(e,n){var r=n.row,a=n.col,o=t.props,l=o.board,c=o.gameStatus,u=o.unflagCell,i=o.flagCell;e.preventDefault(),c===k.RUNNING&&(l.getIn([r,a,"flagged"])?u({row:r,col:a}):i({row:r,col:a}))},t}return Object(p.a)(n,e),Object(u.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.props,n=e.setGameStatus;0===e.coveredCellsCount&&n(k.WON)}},{key:"render",value:function(){var e=this,n=this.props,t=n.board,r=n.createNewBoard,o=n.setGameStatus,l=n.coveredCellsCount;return a.a.createElement("div",null,"COUNT:",l,a.a.createElement("button",{onClick:function(){o(k.RUNNING),r({width:9,height:9,mines:1})}},"New"),t.map(function(n,t){return a.a.createElement(T,null,n.map(function(n,r){return a.a.createElement(z,{covered:n.covered,onClick:function(){return e.handleCellClick({row:t,col:r})},onContextMenu:function(n){return e.handleCellRightClick(n,{row:t,col:r})}},a.a.createElement(J,{value:n.value,covered:n.covered,flagged:n.flagged}))}))}))}}]),n}(r.Component),H={createNewBoard:function(e){return{type:"CREATE_NEW_BOARD",payload:{width:e.width,height:e.height,mines:e.mines}}},uncoverCell:function(e){return{type:"UNCOVER_CELL",payload:{row:e.row,col:e.col}}},flagCell:function(e){return{type:"FLAG_CELL",payload:{row:e.row,col:e.col}}},unflagCell:function(e){return{type:"UNFLAG_CELL",payload:{row:e.row,col:e.col}}},setGameStatus:function(e){return{type:"SET_GAME_STATUS",payload:e}}},$=Object(d.b)(function(e){return{board:j(e),gameStatus:L(e),coveredCellsCount:I(e)}},H)(V);function q(){var e=Object(h.a)(["\n  position: fixed;\n  top: 150px;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  padding: 50px 150px;\n  font-size: 30px;\n  color: ","\n  text-shadow: -2px -2px 0 #fff, 0px -2px 0 #fff, 2px -2px 0 #fff,\n    -2px 2px 0 #fff, 0px 2px #fff, 2px 2px 0 #fff, 0px 0px 60px #fff,\n    0px 0px 40px #fff, 0px 0px 20px #fff;\n"]);return q=function(){return e},e}var K=w.a.div(q(),G.bodyBackground),P=function(e){var n=e.gameStatus;return n!==k.RUNNING&&n!==k.MENU&&a.a.createElement(K,null,n===k.LOST&&a.a.createElement("h2",null,"Game Over"),n===k.WON&&a.a.createElement("h2",null,"Congratulations!"))};function Q(){var e=Object(h.a)(["\n  max-width: 960px;\n  margin: 30px auto;\n  text-align: center;\n"]);return Q=function(){return e},e}var X=w.a.div(Q()),Y=Object(d.b)(function(e){return{gameStatus:L(e)}})(function(e){var n=e.gameStatus;return a.a.createElement(X,null,a.a.createElement($,null),a.a.createElement(P,{gameStatus:n}))}),Z=t(51);function ee(){var e=Object(h.a)(["\n  margin: 30px;\n"]);return ee=function(){return e},e}function ne(){var e=Object(h.a)(["\n  color: #fff;\n  max-width: 960px;\n  margin: 0 auto;\n"]);return ne=function(){return e},e}var te=w.a.div(ne()),re=w.a.div(ee()),ae=function(){return a.a.createElement(te,null,a.a.createElement(re,null,a.a.createElement("h1",null,"Start new game"),"Home ",a.a.createElement(Z.a,{to:"/minesweeper/game"},"Game")))},oe=t(15),le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.MENU,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.type,r=n.payload;return"SET_GAME_STATUS"===t?r:e},ce=Object(oe.combineReducers)({board:S,status:le}),ue=Object(oe.combineReducers)({game:ce}),ie=Object(s.b)(ue),fe=function(e){function n(){return Object(c.a)(this,n),Object(i.a)(this,Object(f.a)(n).apply(this,arguments))}return Object(p.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){return a.a.createElement(d.a,{store:ie},a.a.createElement(g.a,{basename:"/minesweeper"},a.a.createElement(v.a,null,a.a.createElement(m.a,{path:"/game",component:Y}),a.a.createElement(m.a,{path:"/menu",component:ae}))))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.c1e3eca8.chunk.js.map